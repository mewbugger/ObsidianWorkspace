#### 为什么需要一致性协议
在**集群模式**下，就需要考虑如何保障**各个节点之间**的**数据一致性**以及**数据同步**。要想解决这个问题，就不得不引入**共识算法**，通过算法来保障各个节点之间的数据的一致性。
#### Nacos选择了Raft（强一致性）&Distro（最终一致性）

##### 服务发现角度
- 如果服务可以自己上报自己的健康状态，那就是**非持久化服务**
- 如果服务要依赖naocs-server去探测，那就是**持久化服务**，比如DNS协议场景
对于**非持久化服务**，由于强调服务的可用性而不是数据的即时一致性，采用了**最终一致性**共识算法。这种算法可以保证服务的持续可用性，同时确保一定时间内数据在各个节点间达成一致。
**非持久化服务**通过给注册中心发送心跳让注册中心确认自己的健康状况，所以注册中心**必须是高可用**的，需要能够随时确认非持久化服务的健康状态，所以对于非持久化服务的**数据一致性**选择的是**最终一致性**。

对于**持久化服务**，因为所有的数据都是**直接使用调用Nacos服务端直接创建**，因此需要由Nacos保障数据在**各个节点之间的强一致性**，故而针对此类型的服务数据，选择了强一致性共识算法来保障数据的一致性。
##### 配置管理角度
配置数据，是直接在 Nacos 服务端进行创建并进行管理的，必须保证大部分的节点都保存了此配置数据才能认为配置被成功保存了，否则就会丢失配置的变更，如果出现这种情况，问题是很严重的，如果是发布重要配置变更出现了丢失变更动作的情况，那多半就要引起严重的现网故障了，因此对于配置数据的管理，是必须要求集群中大部分的节点是强一致的，而这里的话只能使用**强一致性**共识算法
